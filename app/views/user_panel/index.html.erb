<%= render "layouts/user-panel" %>

<div class="main">
    <div id="floating-panel">
        <button class="btn activation" id="#heatMap_report" onclick="toggleHeatmap()">Report heatmap</button>
        <button class="btn activation" id="#heatMap_radius" onclick="changeRadius()">Radius</button>
        <button class="btn activation" id="#heatMap_gradient" onclick="changeGradient()">Color</button>
    </div>
    <div id="map" class="map_user-panel"></div>
</div>


<!-- Generacion del mapa con todos los reportes hechos -->
<script>
    var xlat, xlng;
    var loc_crime;
    var details;
    var data = [];
    var data_susp = [];
    var data_transp = [];

    <% @temp.each do | report | %>
          xlat = "<%= report.latitude %>" ;
          xlng = "<%= report.longitude %> ";
          details = "<%= report.details %> ";
          xlat = parseFloat(xlat);
          xlng = parseFloat(xlng);
          tuple = [xlat, xlng, details];
          data.push(tuple);
    <% end %>

    <% @suspect_temp.each do | suspect | %>
          xlat = "<%= suspect.latitude %>" ;
          xlng = "<%= suspect.longitude %> ";
          details = "<%= suspect.details %> ";
          xlat = parseFloat(xlat);
          xlng = parseFloat(xlng);
          tuple = [xlat, xlng, details];
          data_susp.push(tuple);
    <% end %>

</script>


<%= render "layouts/map-actions" %>
<%= javascript_include_tag "g_maps/gm_user-panel" %>
